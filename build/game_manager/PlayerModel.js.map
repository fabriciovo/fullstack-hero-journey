{"version":3,"sources":["../../src/game_manager/PlayerModel.js"],"names":["PlayerModel","playerId","spawnLocations","players","name","frame","playerSchema","attack","defense","health","maxHealth","gold","id","playerName","items","maxNumberOfItems","playerAttacking","flipX","location","generateLocation","x","y","item","attackBonus","defenseBonus","healthBonus","itemId","Object","keys","length","damage","updateHealth","Math","floor","random","invalidLocation","some","key"],"mappings":"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","sourcesContent":["export default class PlayerModel {\r\n  constructor(playerId, spawnLocations, players, name, frame, playerSchema) {\r\n    this.attack = playerSchema.attack;\r\n    this.defense = playerSchema.defense;\r\n    this.health = playerSchema.health;\r\n    this.maxHealth = playerSchema.maxHealth;\r\n    this.gold = playerSchema.gold;\r\n    this.id = playerId;\r\n    this.playerName = name;\r\n    this.frame = frame;\r\n    this.items = playerSchema.items || {};\r\n    //this.playerItems =  {};\r\n\r\n    this.maxNumberOfItems = 5;\r\n\r\n    this.spawnLocations = spawnLocations;\r\n    this.playerAttacking = false;\r\n    this.flipX = true;\r\n    const location = this.generateLocation(players);\r\n    this.x = location[0];\r\n    this.y = location[1];\r\n  }\r\n\r\n  addItem(item) {\r\n    this.items[item.id] = item;\r\n    this.attack += item.attackBonus;\r\n    this.defense += item.defenseBonus;\r\n    this.maxHealth += item.healthBonus;\r\n  }\r\n  removeItem(itemId) {\r\n    this.attack -= this.items[itemId].attackBonus;\r\n    this.defense -= this.items[itemId].defenseBonus;\r\n    this.maxHealth -= this.items[itemId].healthBonus;\r\n    delete this.items[itemId];\r\n  }\r\n\r\n  canPickupItem() {\r\n    if (Object.keys(this.items).length < 5) {\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  playerAttacked(attack) {\r\n    let damage = this.defense - attack;\r\n    if (damage > 0) damage = 0;\r\n\r\n    this.updateHealth(damage);\r\n  }\r\n\r\n  updateGold(gold) {\r\n    this.gold += gold;\r\n  }\r\n\r\n  updateHealth(health) {\r\n    this.health += health;\r\n    if (this.health > this.maxHealth) this.health = this.maxHealth;\r\n  }\r\n\r\n  respawn(players) {\r\n    this.health = this.maxHealth;\r\n    const location = this.generateLocation(players);\r\n    this.x = location[0];\r\n    this.y = location[1];\r\n  }\r\n\r\n  generateLocation(players) {\r\n    const location =\r\n      this.spawnLocations[\r\n        Math.floor(Math.random() * this.spawnLocations.length)\r\n      ];\r\n    const invalidLocation = Object.keys(players).some((key) => {\r\n      if (players[key].x === location[0] && players[key].y === location[1]) {\r\n        return true;\r\n      } else {\r\n        return false;\r\n      }\r\n    });\r\n\r\n    if (invalidLocation) {\r\n      return this.generateLocation(players);\r\n    } else {\r\n      return location;\r\n    }\r\n  }\r\n}\r\n"],"file":"PlayerModel.js"}