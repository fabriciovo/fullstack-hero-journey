{"version":3,"sources":["../../src/game_manager/PlayerModel.js"],"names":["PlayerModel","playerId","spawnLocations","players","name","frame","playerSchema","attack","defense","health","maxHealth","gold","id","playerName","items","maxNumberOfItems","playerAttacking","flipX","location","generateLocation","x","y","console","log","item","attackBonus","defenseBonus","healthBonus","itemId","Object","keys","length","damage","updateHealth","Math","floor","random","invalidLocation","some","key"],"mappings":"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","sourcesContent":["\r\nexport default class PlayerModel {\r\n    constructor(playerId, spawnLocations, players, name, frame, playerSchema) {\r\n        this.attack = playerSchema.attack;\r\n        this.defense = playerSchema.defense;\r\n        this.health = playerSchema.health;\r\n        this.maxHealth = playerSchema.maxHealth;\r\n        this.gold = playerSchema.gold;\r\n        this.id = playerId;\r\n        this.playerName = name;\r\n        this.frame = frame;\r\n        this.items = playerSchema.items || {};\r\n        //this.playerItems =  {};\r\n\r\n        this.maxNumberOfItems = 5;\r\n\r\n        this.spawnLocations = spawnLocations;\r\n        this.playerAttacking = false;\r\n        this.flipX = true;\r\n        const location = this.generateLocation(players);\r\n        this.x = location[0];\r\n        this.y = location[1];\r\n\r\n        console.log(playerSchema)\r\n        console.log(this.items)\r\n    }\r\n\r\n    addItem(item){\r\n        console.log(item)\r\n        console.log(this.items)\r\n        this.items[item.id] = item;\r\n        this.attack += item.attackBonus;\r\n        this.defense += item.defenseBonus;\r\n        this.maxHealth += item.healthBonus;\r\n        console.log(this.items)\r\n\r\n    }\r\n    removeItem(itemId){\r\n        this.attack -= this.items[itemId].attackBonus;\r\n        this.defense -= this.items[itemId].defenseBonus;\r\n        this.maxHealth -= this.items[itemId].healthBonus;\r\n        delete this.items[itemId];\r\n    }\r\n\r\n    canPickupItem() {\r\n        if (Object.keys(this.items).length < 5) {\r\n          return true;\r\n        }\r\n        return false;\r\n      }\r\n    \r\n\r\n    playerAttacked (attack){\r\n        const damage = this.defense - attack;\r\n        this.updateHealth(damage);\r\n    }\r\n\r\n    updateGold(gold) {\r\n        this.gold += gold;\r\n    }\r\n\r\n    updateHealth(health) {\r\n        this.health += health;\r\n        if (this.health > this.maxHealth) this.health = this.maxHealth;\r\n    }\r\n\r\n    respawn(players) {\r\n        this.health = this.maxHealth;\r\n        const location = this.generateLocation(players);\r\n        this.x = location[0];\r\n        this.y = location[1];\r\n    }\r\n\r\n\r\n    generateLocation(players){\r\n        const location = this.spawnLocations[Math.floor(Math.random() * this.spawnLocations.length)];\r\n        const invalidLocation = Object.keys(players).some(key =>{\r\n            if(players[key].x === location[0] && players[key].y === location[1]){\r\n                return true;\r\n            }else{\r\n                return false;\r\n            }\r\n        });\r\n\r\n        if(invalidLocation){\r\n            return this.generateLocation(players);\r\n        }else{\r\n            return location;\r\n        }\r\n\r\n    }\r\n\r\n\r\n}\r\n"],"file":"PlayerModel.js"}