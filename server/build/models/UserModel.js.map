{"version":3,"file":"UserModel.js","names":["_mongoose","_interopRequireDefault","require","_bcrypt","Schema","mongoose","PlayerSchema","playerName","type","String","attack","Number","defense","maxHealth","health","key","frame","gold","exp","maxExp","level","items","Object","equipedItems","potions","UserSchema","email","required","unique","password","username","resetToken","resetTokenExp","Date","player","pre","_ref","_asyncToGenerator2","_regenerator","mark","_callee","next","hash","wrap","_callee$","_context","prev","bcrypt","sent","stop","_x","apply","arguments","methods","isValidPassword","_ref2","_callee2","user","compare","_callee2$","_context2","abrupt","_x2","UserModel","model","_default","exports"],"sources":["../../src/models/UserModel.js"],"sourcesContent":["/* eslint-disable func-names */\r\nimport mongoose from \"mongoose\";\r\nimport bcrypt from \"bcrypt\";\r\n\r\nconst { Schema } = mongoose;\r\n\r\nconst PlayerSchema = new Schema({\r\n  playerName: {\r\n    type: String,\r\n  },\r\n  attack: {\r\n    type: Number,\r\n  },\r\n  defense: {\r\n    type: Number,\r\n  },\r\n  maxHealth: {\r\n    type: Number,\r\n  },\r\n  health: {\r\n    type: Number,\r\n  },\r\n  key:{\r\n    type:String\r\n  },\r\n  frame: {\r\n    type: Number,\r\n  },\r\n  gold: {\r\n    type: Number,\r\n  },\r\n  exp:{\r\n    type:Number\r\n  },\r\n  maxExp:{\r\n    type:Number\r\n  },\r\n  level:{\r\n    type:Number\r\n  },\r\n  items: {\r\n    type:Object\r\n  },\r\n  equipedItems:{\r\n    type:Object\r\n  },\r\n  potions:{\r\n    type:Number\r\n  }\r\n});\r\n\r\nconst UserSchema = new Schema({\r\n  email: {\r\n    type: String,\r\n    required: true,\r\n    unique: true,\r\n  },\r\n  password: {\r\n    type: String,\r\n    required: true,\r\n  },\r\n  username: {\r\n    type: String,\r\n    required: true,\r\n    unique: true,\r\n  },\r\n  resetToken: {\r\n    type: String,\r\n  },\r\n  resetTokenExp: {\r\n    type: Date,\r\n  },\r\n  player: {\r\n    type: PlayerSchema,\r\n  },\r\n});\r\n\r\nUserSchema.pre(\"save\", async function (next) {\r\n  const hash = await bcrypt.hash(this.password, 10);\r\n  this.password = hash;\r\n  next();\r\n});\r\n\r\nUserSchema.methods.isValidPassword = async function (password) {\r\n  const user = this;\r\n  const compare = await bcrypt.compare(password, user.password);\r\n  return compare;\r\n};\r\n\r\nconst UserModel = mongoose.model(\"user\", UserSchema);\r\n\r\nexport default UserModel;\r\n"],"mappings":"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"}