{"version":3,"sources":["../../src/game_manager/PlayerModel.js"],"names":["PlayerModel","playerId","spawnLocations","players","name","frame","playerSchema","attack","defense","health","maxHealth","gold","id","playerName","items","equipedItems","maxNumberOfItems","actionAActive","flipX","location","generateLocation","x","y","item","attackBonus","defenseBonus","healthBonus","removeItem","itemId","Object","keys","length","damage","updateHealth","Math","floor","random","invalidLocation","some","key"],"mappings":"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","sourcesContent":["export default class PlayerModel {\r\n  constructor(playerId, spawnLocations, players, name, frame, playerSchema) {\r\n    this.attack = playerSchema.attack;\r\n    this.defense = playerSchema.defense;\r\n    this.health = playerSchema.health;\r\n    this.maxHealth = playerSchema.maxHealth;\r\n    this.gold = playerSchema.gold;\r\n    this.id = playerId;\r\n    this.playerName = name;\r\n    this.frame = frame;\r\n    this.items = playerSchema.items || {};\r\n    this.equipedItems = playerSchema.equipedItems || {};\r\n    //this.playerItems =  {};\r\n\r\n    this.maxNumberOfItems = 5;\r\n\r\n    this.spawnLocations = spawnLocations;\r\n    this.actionAActive = false;\r\n    this.flipX = true;\r\n    const location = this.generateLocation(players);\r\n    this.x = location[0];\r\n    this.y = location[1];\r\n  }\r\n\r\n  addItem(item) {\r\n    this.items[item.id] = item;\r\n  }\r\n\r\n  equipItem(item) {\r\n    this.equipedItems[item.id] = item;\r\n\r\n    this.attack += this.equipedItems[item.id].attackBonus;\r\n    this.defense += this.equipedItems[item.id].defenseBonus;\r\n    this.maxHealth += this.equipedItems[item.id].healthBonus;\r\n    this.removeItem(item.id);\r\n  }\r\n\r\n  removeEquipedItem(itemId) {\r\n    this.attack -= this.equipedItems[itemId].attackBonus;\r\n    this.defense -= this.equipedItems[itemId].defenseBonus;\r\n    this.maxHealth -= this.equipedItems[itemId].healthBonus;\r\n    delete this.equipedItems[itemId];\r\n  }\r\n\r\n  removeItem(itemId) {\r\n    // this.attack -= this.items[itemId].attackBonus;\r\n    // this.defense -= this.items[itemId].defenseBonus;\r\n    // this.maxHealth -= this.items[itemId].healthBonus;\r\n    delete this.items[itemId];\r\n  }\r\n\r\n  canPickupItem() {\r\n    if (Object.keys(this.items).length < 5) {\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  canEquipItem() {\r\n    if (Object.keys(this.equipedItems).length < 5) {\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  playerAttacked(attack) {\r\n    let damage = this.defense - attack;\r\n    if (damage > 0) damage = 0;\r\n\r\n    this.updateHealth(damage);\r\n  }\r\n\r\n  updateGold(gold) {\r\n    this.gold += gold;\r\n  }\r\n\r\n  updateHealth(health) {\r\n    this.health += health;\r\n    if (this.health > this.maxHealth) this.health = this.maxHealth;\r\n  }\r\n\r\n  respawn(players) {\r\n    this.health = this.maxHealth;\r\n    const location = this.generateLocation(players);\r\n    this.x = location[0];\r\n    this.y = location[1];\r\n  }\r\n\r\n  generateLocation(players) {\r\n    const location =\r\n      this.spawnLocations[\r\n        Math.floor(Math.random() * this.spawnLocations.length)\r\n      ];\r\n    const invalidLocation = Object.keys(players).some((key) => {\r\n      if (players[key].x === location[0] && players[key].y === location[1]) {\r\n        return true;\r\n      } else {\r\n        return false;\r\n      }\r\n    });\r\n\r\n    if (invalidLocation) {\r\n      return this.generateLocation(players);\r\n    } else {\r\n      return location;\r\n    }\r\n  }\r\n}\r\n"],"file":"PlayerModel.js"}