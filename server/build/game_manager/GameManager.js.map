{"version":3,"file":"GameManager.js","names":["_jsonwebtoken","_interopRequireDefault","require","_ChatModel","levelData","_interopRequireWildcard","_MonsterController","_PlayerController","_ItemController","_NpcController","_MessageController","_currentController","_getRequireWildcardCache","e","WeakMap","r","t","__esModule","_typeof","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","hasOwnProperty","call","i","set","GameManager","exports","io","_classCallCheck2","monsterController","MonsterController","playerController","PlayerController","itemController","ItemController","npcController","NpcController","messageController","MessageController","currentController","CurrentController","instanceId","rangedObjects","locationsDictionary","_createClass2","key","value","setup","parseMapData","setupEventListeners","layers","forEach","_ref","name","objects","_this","on","socket","err","console","log","concat","message","emit","players","monsters","chests","items"],"sources":["../../src/game_manager/GameManager.js"],"sourcesContent":["import jwt from \"jsonwebtoken\";\n\nimport ChatModel from \"../models/ChatModel\";\n\nimport * as levelData from \"../../public/assets/level/new_level.json\";\n\nimport MonsterController from \"./controllers/MonsterController\";\nimport PlayerController from \"./controllers/PlayerController\";\nimport ItemController from \"./controllers/ItemController\";\nimport NpcController from \"./controllers/NpcController\";\nimport MessageController from \"./controllers/MessageController\";\nimport CurrentController from \"./controllers/currentController\";\n\nexport default class GameManager {\n  constructor(io) {\n    this.io = io;\n\n    this.monsterController = new MonsterController(this.io);\n    this.playerController = new PlayerController(this.io);\n    this.itemController = new ItemController(this.io);\n    this.npcController = new NpcController(this.io);\n    this.messageController = new MessageController(this.io);\n    this.currentController = new CurrentController(this.io);\n\n    this.instanceId = \"instance-0\";\n\n    this.rangedObjects = {};\n\n    this.locationsDictionary = {};\n  }\n\n  setup() {\n    this.parseMapData();\n    this.setupEventListeners();\n  }\n\n  parseMapData() {\n    this.levelData = levelData;\n    this.levelData.layers.forEach(({ name, objects }) => {\n      //this.locationsDictionary[name](objects);\n    });\n  }\n\n  setupEventListeners() {\n    this.io.on(\"connection\", (socket) => {\n      socket.on(\"connect_error\", (err) => {\n        console.log(`connect_error due to ${err.message}`);\n      });\n\n      this.monsterController.setupEventListeners(socket);\n      this.itemController.setupEventListeners(socket);\n      this.npcController.setupEventListeners(socket);\n      this.playerController.setupEventListeners(socket);\n      this.messageController.setupEventListeners(socket);\n      this.currentController.setupEventListeners(socket);\n\n\n      socket.emit(\"currentPlayers\", this.playerController.players, this.instanceId);\n      socket.emit(\"currentMonsters\", this.monsterController.monsters, this.instanceId);\n      socket.emit(\"currentChests\", this.itemController.chests, this.instanceId);\n      socket.emit(\"currentItems\", this.itemController.items, this.instanceId);\n\n      // player connected to our game\n      console.log(\"player connected to our game\");\n    });\n  }\n}\n"],"mappings":";;;;;;;;;;AAAA,IAAAA,aAAA,GAAAC,sBAAA,CAAAC,OAAA;AAEA,IAAAC,UAAA,GAAAF,sBAAA,CAAAC,OAAA;AAEA,IAAAE,SAAA,GAAAC,uBAAA,CAAAH,OAAA;AAEA,IAAAI,kBAAA,GAAAL,sBAAA,CAAAC,OAAA;AACA,IAAAK,iBAAA,GAAAN,sBAAA,CAAAC,OAAA;AACA,IAAAM,eAAA,GAAAP,sBAAA,CAAAC,OAAA;AACA,IAAAO,cAAA,GAAAR,sBAAA,CAAAC,OAAA;AACA,IAAAQ,kBAAA,GAAAT,sBAAA,CAAAC,OAAA;AACA,IAAAS,kBAAA,GAAAV,sBAAA,CAAAC,OAAA;AAAgE,SAAAU,yBAAAC,CAAA,6BAAAC,OAAA,mBAAAC,CAAA,OAAAD,OAAA,IAAAE,CAAA,OAAAF,OAAA,YAAAF,wBAAA,YAAAA,yBAAAC,CAAA,WAAAA,CAAA,GAAAG,CAAA,GAAAD,CAAA,KAAAF,CAAA;AAAA,SAAAR,wBAAAQ,CAAA,EAAAE,CAAA,SAAAA,CAAA,IAAAF,CAAA,IAAAA,CAAA,CAAAI,UAAA,SAAAJ,CAAA,eAAAA,CAAA,gBAAAK,OAAA,CAAAL,CAAA,0BAAAA,CAAA,sBAAAA,CAAA,QAAAG,CAAA,GAAAJ,wBAAA,CAAAG,CAAA,OAAAC,CAAA,IAAAA,CAAA,CAAAG,GAAA,CAAAN,CAAA,UAAAG,CAAA,CAAAI,GAAA,CAAAP,CAAA,OAAAQ,CAAA,KAAAC,SAAA,UAAAC,CAAA,GAAAC,MAAA,CAAAC,cAAA,IAAAD,MAAA,CAAAE,wBAAA,WAAAC,CAAA,IAAAd,CAAA,oBAAAc,CAAA,OAAAC,cAAA,CAAAC,IAAA,CAAAhB,CAAA,EAAAc,CAAA,SAAAG,CAAA,GAAAP,CAAA,GAAAC,MAAA,CAAAE,wBAAA,CAAAb,CAAA,EAAAc,CAAA,UAAAG,CAAA,KAAAA,CAAA,CAAAV,GAAA,IAAAU,CAAA,CAAAC,GAAA,IAAAP,MAAA,CAAAC,cAAA,CAAAJ,CAAA,EAAAM,CAAA,EAAAG,CAAA,IAAAT,CAAA,CAAAM,CAAA,IAAAd,CAAA,CAAAc,CAAA,YAAAN,CAAA,cAAAR,CAAA,EAAAG,CAAA,IAAAA,CAAA,CAAAe,GAAA,CAAAlB,CAAA,EAAAQ,CAAA,GAAAA,CAAA;AAAA,IAE3CW,WAAW,GAAAC,OAAA;EAC9B,SAAAD,YAAYE,EAAE,EAAE;IAAA,IAAAC,gBAAA,mBAAAH,WAAA;IACd,IAAI,CAACE,EAAE,GAAGA,EAAE;IAEZ,IAAI,CAACE,iBAAiB,GAAG,IAAIC,6BAAiB,CAAC,IAAI,CAACH,EAAE,CAAC;IACvD,IAAI,CAACI,gBAAgB,GAAG,IAAIC,4BAAgB,CAAC,IAAI,CAACL,EAAE,CAAC;IACrD,IAAI,CAACM,cAAc,GAAG,IAAIC,0BAAc,CAAC,IAAI,CAACP,EAAE,CAAC;IACjD,IAAI,CAACQ,aAAa,GAAG,IAAIC,yBAAa,CAAC,IAAI,CAACT,EAAE,CAAC;IAC/C,IAAI,CAACU,iBAAiB,GAAG,IAAIC,6BAAiB,CAAC,IAAI,CAACX,EAAE,CAAC;IACvD,IAAI,CAACY,iBAAiB,GAAG,IAAIC,6BAAiB,CAAC,IAAI,CAACb,EAAE,CAAC;IAEvD,IAAI,CAACc,UAAU,GAAG,YAAY;IAE9B,IAAI,CAACC,aAAa,GAAG,CAAC,CAAC;IAEvB,IAAI,CAACC,mBAAmB,GAAG,CAAC,CAAC;EAC/B;EAAC,WAAAC,aAAA,aAAAnB,WAAA;IAAAoB,GAAA;IAAAC,KAAA,EAED,SAAAC,MAAA,EAAQ;MACN,IAAI,CAACC,YAAY,CAAC,CAAC;MACnB,IAAI,CAACC,mBAAmB,CAAC,CAAC;IAC5B;EAAC;IAAAJ,GAAA;IAAAC,KAAA,EAED,SAAAE,aAAA,EAAe;MACb,IAAI,CAACnD,SAAS,GAAGA,SAAS;MAC1B,IAAI,CAACA,SAAS,CAACqD,MAAM,CAACC,OAAO,CAAC,UAAAC,IAAA,EAAuB;QAAA,IAApBC,IAAI,GAAAD,IAAA,CAAJC,IAAI;UAAEC,OAAO,GAAAF,IAAA,CAAPE,OAAO;MAE9C,CAAC,CADC;MACD,CAAC;IACJ;EAAC;IAAAT,GAAA;IAAAC,KAAA,EAED,SAAAG,oBAAA,EAAsB;MAAA,IAAAM,KAAA;MACpB,IAAI,CAAC5B,EAAE,CAAC6B,EAAE,CAAC,YAAY,EAAE,UAACC,MAAM,EAAK;QACnCA,MAAM,CAACD,EAAE,CAAC,eAAe,EAAE,UAACE,GAAG,EAAK;UAClCC,OAAO,CAACC,GAAG,yBAAAC,MAAA,CAAyBH,GAAG,CAACI,OAAO,CAAE,CAAC;QACpD,CAAC,CAAC;QAEFP,KAAI,CAAC1B,iBAAiB,CAACoB,mBAAmB,CAACQ,MAAM,CAAC;QAClDF,KAAI,CAACtB,cAAc,CAACgB,mBAAmB,CAACQ,MAAM,CAAC;QAC/CF,KAAI,CAACpB,aAAa,CAACc,mBAAmB,CAACQ,MAAM,CAAC;QAC9CF,KAAI,CAACxB,gBAAgB,CAACkB,mBAAmB,CAACQ,MAAM,CAAC;QACjDF,KAAI,CAAClB,iBAAiB,CAACY,mBAAmB,CAACQ,MAAM,CAAC;QAClDF,KAAI,CAAChB,iBAAiB,CAACU,mBAAmB,CAACQ,MAAM,CAAC;QAGlDA,MAAM,CAACM,IAAI,CAAC,gBAAgB,EAAER,KAAI,CAACxB,gBAAgB,CAACiC,OAAO,EAAET,KAAI,CAACd,UAAU,CAAC;QAC7EgB,MAAM,CAACM,IAAI,CAAC,iBAAiB,EAAER,KAAI,CAAC1B,iBAAiB,CAACoC,QAAQ,EAAEV,KAAI,CAACd,UAAU,CAAC;QAChFgB,MAAM,CAACM,IAAI,CAAC,eAAe,EAAER,KAAI,CAACtB,cAAc,CAACiC,MAAM,EAAEX,KAAI,CAACd,UAAU,CAAC;QACzEgB,MAAM,CAACM,IAAI,CAAC,cAAc,EAAER,KAAI,CAACtB,cAAc,CAACkC,KAAK,EAAEZ,KAAI,CAACd,UAAU,CAAC;;QAEvE;QACAkB,OAAO,CAACC,GAAG,CAAC,8BAA8B,CAAC;MAC7C,CAAC,CAAC;IACJ;EAAC;AAAA","ignoreList":[]}