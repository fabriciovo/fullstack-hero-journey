{"version":3,"sources":["../../src/game_manager/GameManager.js"],"names":["GameManager","io","monsterController","MonsterController","playerController","PlayerController","itemController","ItemController","npcController","NpcController","messageController","MessageController","currentController","CurrentController","instanceId","rangedObjects","locationsDictionary","parseMapData","setupEventListeners","levelData","layers","forEach","name","objects","on","socket","err","console","log","message","emit","players","monsters","chests","items"],"mappings":";;;;;;;;;;;;;;;AAAA;;AAEA;;AAEA;;AAEA;;AACA;;AACA;;AACA;;AACA;;AACA;;;;;;IAEqBA,W;AACnB,uBAAYC,EAAZ,EAAgB;AAAA;AACd,SAAKA,EAAL,GAAUA,EAAV;AAEA,SAAKC,iBAAL,GAAyB,IAAIC,6BAAJ,CAAsB,KAAKF,EAA3B,CAAzB;AACA,SAAKG,gBAAL,GAAwB,IAAIC,4BAAJ,CAAqB,KAAKJ,EAA1B,CAAxB;AACA,SAAKK,cAAL,GAAsB,IAAIC,0BAAJ,CAAmB,KAAKN,EAAxB,CAAtB;AACA,SAAKO,aAAL,GAAqB,IAAIC,yBAAJ,CAAkB,KAAKR,EAAvB,CAArB;AACA,SAAKS,iBAAL,GAAyB,IAAIC,6BAAJ,CAAsB,KAAKV,EAA3B,CAAzB;AACA,SAAKW,iBAAL,GAAyB,IAAIC,6BAAJ,CAAsB,KAAKZ,EAA3B,CAAzB;AAEA,SAAKa,UAAL,GAAkB,YAAlB;AAEA,SAAKC,aAAL,GAAqB,EAArB;AAEA,SAAKC,mBAAL,GAA2B,EAA3B;AACD;;;;WAED,iBAAQ;AACN,WAAKC,YAAL;AACA,WAAKC,mBAAL;AACD;;;WAED,wBAAe;AACb,WAAKC,SAAL,GAAiBA,SAAjB;AACA,WAAKA,SAAL,CAAeC,MAAf,CAAsBC,OAAtB,CAA8B,gBAAuB,CACnD;;AADmD,YAApBC,IAAoB,QAApBA,IAAoB;AAAA,YAAdC,OAAc,QAAdA,OAAc;AAEpD,OAFD;AAGD;;;WAED,+BAAsB;AAAA;;AACpB,WAAKtB,EAAL,CAAQuB,EAAR,CAAW,YAAX,EAAyB,UAACC,MAAD,EAAY;AACnCA,QAAAA,MAAM,CAACD,EAAP,CAAU,eAAV,EAA2B,UAACE,GAAD,EAAS;AAClCC,UAAAA,OAAO,CAACC,GAAR,gCAAoCF,GAAG,CAACG,OAAxC;AACD,SAFD;;AAIA,QAAA,KAAI,CAAC3B,iBAAL,CAAuBgB,mBAAvB,CAA2CO,MAA3C;;AACA,QAAA,KAAI,CAACnB,cAAL,CAAoBY,mBAApB,CAAwCO,MAAxC;;AACA,QAAA,KAAI,CAACjB,aAAL,CAAmBU,mBAAnB,CAAuCO,MAAvC;;AACA,QAAA,KAAI,CAACrB,gBAAL,CAAsBc,mBAAtB,CAA0CO,MAA1C;;AACA,QAAA,KAAI,CAACf,iBAAL,CAAuBQ,mBAAvB,CAA2CO,MAA3C;;AACA,QAAA,KAAI,CAACb,iBAAL,CAAuBM,mBAAvB,CAA2CO,MAA3C;;AAGAA,QAAAA,MAAM,CAACK,IAAP,CAAY,gBAAZ,EAA8B,KAAI,CAAC1B,gBAAL,CAAsB2B,OAApD,EAA6D,KAAI,CAACjB,UAAlE;AACAW,QAAAA,MAAM,CAACK,IAAP,CAAY,iBAAZ,EAA+B,KAAI,CAAC5B,iBAAL,CAAuB8B,QAAtD,EAAgE,KAAI,CAAClB,UAArE;AACAW,QAAAA,MAAM,CAACK,IAAP,CAAY,eAAZ,EAA6B,KAAI,CAACxB,cAAL,CAAoB2B,MAAjD,EAAyD,KAAI,CAACnB,UAA9D;AACAW,QAAAA,MAAM,CAACK,IAAP,CAAY,cAAZ,EAA4B,KAAI,CAACxB,cAAL,CAAoB4B,KAAhD,EAAuD,KAAI,CAACpB,UAA5D,EAhBmC,CAkBnC;;AACAa,QAAAA,OAAO,CAACC,GAAR,CAAY,8BAAZ;AACD,OApBD;AAqBD","sourcesContent":["import jwt from \"jsonwebtoken\";\r\n\r\nimport ChatModel from \"../models/ChatModel\";\r\n\r\nimport * as levelData from \"../../public/assets/level/new_level.json\";\r\n\r\nimport MonsterController from \"./controllers/MonsterController\";\r\nimport PlayerController from \"./controllers/PlayerController\";\r\nimport ItemController from \"./controllers/ItemController\";\r\nimport NpcController from \"./controllers/NpcController\";\r\nimport MessageController from \"./controllers/MessageController\";\r\nimport CurrentController from \"./controllers/currentController\";\r\n\r\nexport default class GameManager {\r\n  constructor(io) {\r\n    this.io = io;\r\n\r\n    this.monsterController = new MonsterController(this.io);\r\n    this.playerController = new PlayerController(this.io);\r\n    this.itemController = new ItemController(this.io);\r\n    this.npcController = new NpcController(this.io);\r\n    this.messageController = new MessageController(this.io);\r\n    this.currentController = new CurrentController(this.io);\r\n\r\n    this.instanceId = \"instance-0\";\r\n\r\n    this.rangedObjects = {};\r\n\r\n    this.locationsDictionary = {};\r\n  }\r\n\r\n  setup() {\r\n    this.parseMapData();\r\n    this.setupEventListeners();\r\n  }\r\n\r\n  parseMapData() {\r\n    this.levelData = levelData;\r\n    this.levelData.layers.forEach(({ name, objects }) => {\r\n      //this.locationsDictionary[name](objects);\r\n    });\r\n  }\r\n\r\n  setupEventListeners() {\r\n    this.io.on(\"connection\", (socket) => {\r\n      socket.on(\"connect_error\", (err) => {\r\n        console.log(`connect_error due to ${err.message}`);\r\n      });\r\n\r\n      this.monsterController.setupEventListeners(socket);\r\n      this.itemController.setupEventListeners(socket);\r\n      this.npcController.setupEventListeners(socket);\r\n      this.playerController.setupEventListeners(socket);\r\n      this.messageController.setupEventListeners(socket);\r\n      this.currentController.setupEventListeners(socket);\r\n\r\n\r\n      socket.emit(\"currentPlayers\", this.playerController.players, this.instanceId);\r\n      socket.emit(\"currentMonsters\", this.monsterController.monsters, this.instanceId);\r\n      socket.emit(\"currentChests\", this.itemController.chests, this.instanceId);\r\n      socket.emit(\"currentItems\", this.itemController.items, this.instanceId);\r\n\r\n      // player connected to our game\r\n      console.log(\"player connected to our game\");\r\n    });\r\n  }\r\n}\r\n"],"file":"GameManager.js"}