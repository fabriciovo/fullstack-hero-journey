{"version":3,"file":"Spawner.js","names":["_utils","require","_ChestModel","_interopRequireDefault","_MonsterModel","_ItemModel","itemData","_interopRequireWildcard","enemyData","_NpcModel","_getRequireWildcardCache","e","WeakMap","r","t","__esModule","_typeof","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","hasOwnProperty","call","i","set","Spawner","exports","config","spawnLocations","addObject","deleteObject","moveObjects","_classCallCheck2","id","spawnInterval","limit","objectType","spawnerType","objectsCreated","start","_createClass2","key","value","_this","interval","setInterval","length","spawnObject","SpawnerType","CHEST","spawnChest","MONSTER","spawnMonster","ITEM","spawnItem","NPC","spawnNpc","location","pickRandomLocation","randomItem","items","Math","floor","random","item","ItemModel","name","frame","getRandonValues","WeaponTypes","MELEE","push","chest","ChestModel","randomNumber","randomEnemy","enemies","monster","MonsterModel","goldValue","healthValue","attackValue","expValue","npc","NpcModel","invalidLocation","some","obj","x","y","removeObject","filter"],"sources":["../../../src/game_manager/controllers/Spawner.js"],"sourcesContent":["import { SpawnerType, randomNumber, WeaponTypes, getRandonValues } from \"../utils\";\nimport ChestModel from \"../../models/ChestModel\";\nimport MonsterModel from \"../../models/MonsterModel\";\nimport ItemModel from \"../../models/ItemModel\";\nimport * as itemData from \"../../../public/assets/level/tools.json\";\nimport * as enemyData from \"../../../public/assets/Enemies/enemies.json\";\n\nimport NpcModel from \"../../models/NpcModel\";\n\n\n\nexport default class Spawner {\n  constructor(config, spawnLocations, addObject, deleteObject, moveObjects) {\n    this.id = config.id;\n    this.spawnInterval = config.spawnInterval;\n    this.limit = config.limit;\n    this.objectType = config.spawnerType;\n    this.spawnLocations = spawnLocations;\n    this.addObject = addObject;\n    this.deleteObject = deleteObject;\n    this.moveObjects = moveObjects;\n\n    this.objectsCreated = [];\n\n    this.start();\n  }\n\n  start() {\n    this.interval = setInterval(() => {\n      if (this.objectsCreated.length < this.limit) {\n        this.spawnObject();\n      }\n    }, this.spawnInterval);\n  }\n\n  spawnObject() {\n    if (this.objectType === SpawnerType.CHEST) {\n      this.spawnChest();\n    } else if (this.objectType === SpawnerType.MONSTER) {\n      this.spawnMonster();\n    } else if (this.objectType === SpawnerType.ITEM) {\n      this.spawnItem();\n    } else if (this.objectType === SpawnerType.NPC) {\n      this.spawnNpc();\n    }\n  }\n\n  spawnItem() {\n    const location = this.pickRandomLocation();\n\n    const randomItem =\n      itemData.items[Math.floor(Math.random() * itemData.items.length)];\n\n    const item = new ItemModel(\n      location[0],\n      location[1],\n      this.id,\n      randomItem.name,\n      randomItem.frame,\n      getRandonValues(),\n      getRandonValues(),\n      getRandonValues(),\n      WeaponTypes.MELEE,\n      \"Description\"\n    );\n    this.objectsCreated.push(item);\n    this.addObject(item.id, item);\n  }\n\n  spawnChest() {\n    const location = this.pickRandomLocation();\n    const chest = new ChestModel(\n      location[0],\n      location[1],\n      randomNumber(10, 20),\n      this.id\n    );\n    this.objectsCreated.push(chest);\n    this.addObject(chest.id, chest);\n  }\n\n  spawnMonster() {\n    const randomEnemy =\n      enemyData.enemies[Math.floor(Math.random() * enemyData.enemies.length)];\n\n    const location = this.pickRandomLocation();\n    const monster = new MonsterModel(\n      location[0],\n      location[1],\n      randomEnemy.goldValue, // gold value\n      this.id,\n      randomEnemy.key, // key\n      randomEnemy.healthValue, // health value\n      randomEnemy.attackValue, // attack value\n      randomEnemy.expValue, // exp value\n      3000 //timer\n    );\n    this.objectsCreated.push(monster);\n    this.addObject(monster.id, monster);\n  }\n\n  spawnNpc() {\n    const location = this.pickRandomLocation();\n    const npc = new NpcModel(location[0], location[1], this.id);\n    this.objectsCreated.push(npc);\n    this.addObject(npc.id, npc);\n  }\n\n  pickRandomLocation() {\n    const location =\n      this.spawnLocations[\n        Math.floor(Math.random() * this.spawnLocations.length)\n      ];\n    const invalidLocation = this.objectsCreated.some((obj) => {\n      if (obj.x === location[0] && obj.y === location[1]) {\n        return true;\n      }\n      return false;\n    });\n\n    if (invalidLocation) return this.pickRandomLocation();\n    return location;\n  }\n\n  removeObject(id) {\n    this.objectsCreated = this.objectsCreated.filter((obj) => obj.id !== id);\n    this.deleteObject(id);\n  }\n}"],"mappings":"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","ignoreList":[]}